services:
  frontend:
    user: ${USERID}:${GROUPID}
    build:
      context: ${FRONTEND_FOLDER}
      dockerfile: ${FRONTEND_FOLDER}/dev.Dockerfile
      args:
        USERID: ${USERID}
        GROUPID: ${GROUPID}
    ports:
      - "3000:3000"
    volumes:
      - ${FRONTEND_FOLDER}:/usr/app
  backend:
    user: ${USERID}:${GROUPID}
    build:
      context: ${BACKEND_FOLDER}
      dockerfile: ${BACKEND_FOLDER}/dev.Dockerfile
      args:
        USERID: ${USERID}
        GROUPID: ${GROUPID}
    ports:
      - ${DEBUG_PORT}:9230
      - "3001:3001"
    volumes:
      - ${BACKEND_FOLDER}:/usr/app
    environment:
      NODE_ENV: development
#    labels:
#      - "traefik.enable=true"
#      - "traefik.http.routers.${PROJECT_NAME}.tls=true"
#      - "traefik.http.routers.${PROJECT_NAME}.rule=Host(`${URL}`)"
#      - "traefik.http.services.${PROJECT_NAME}.loadbalancer.server.port=3000"
  db:
    volumes:
      - db_data:/var/lib/postgresql/data
